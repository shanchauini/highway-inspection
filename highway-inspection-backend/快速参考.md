# å¿«é€Ÿå‚è€ƒæ‰‹å†Œ

## ğŸš€ å¿«é€Ÿå¯åŠ¨

```bash
# 1. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
venv\Scripts\activate  # Windows
source venv/bin/activate  # Linux/Mac

# 2. å¯åŠ¨æœåŠ¡
python run.py

# 3. è®¿é—®
http://localhost:5000
```

## ğŸ“Œ å¸¸ç”¨å‘½ä»¤

### ä¾èµ–ç®¡ç†
```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# æ›´æ–°ä¾èµ–
pip install --upgrade package_name

# å¯¼å‡ºä¾èµ–
pip freeze > requirements.txt
```

### æ•°æ®åº“æ“ä½œ
```bash
# åˆå§‹åŒ–è¿ç§»
flask db init

# ç”Ÿæˆè¿ç§»
flask db migrate -m "æè¿°"

# æ‰§è¡Œè¿ç§»
flask db upgrade

# å›æ»šè¿ç§»
flask db downgrade

# åˆå§‹åŒ–æµ‹è¯•æ•°æ®
python init_db.py
```

### æµ‹è¯•
```bash
# APIæµ‹è¯•
python test_api.py

# å¥åº·æ£€æŸ¥
curl http://localhost:5000/health
```

## ğŸ”‘ æµ‹è¯•è´¦å·

| ç”¨æˆ·å | å¯†ç  | è§’è‰² |
|--------|------|------|
| admin | admin123 | ç®¡ç†å‘˜ |
| operator1 | op123 | æ“ä½œå‘˜ |
| operator2 | op123 | æ“ä½œå‘˜ |

## ğŸ“¡ APIå¿«é€Ÿç´¢å¼•

### è®¤è¯
```bash
# æ³¨å†Œ
POST /api/auth/register
{"username":"test","password":"1234"}

# ç™»å½•
POST /api/auth/login
{"username":"test","password":"1234"}

# è·å–å½“å‰ç”¨æˆ·
GET /api/auth/current
Header: Authorization: Bearer <token>
```

### ç©ºåŸŸ
```bash
# è·å–åˆ—è¡¨
GET /api/airspaces?page=1&page_size=20

# åˆ›å»ºç©ºåŸŸï¼ˆç®¡ç†å‘˜ï¼‰
POST /api/airspaces
{"name":"æµ‹è¯•ç©ºåŸŸ","number":"AS999","type":"suitable","area":{...}}
```

### é£è¡Œç”³è¯·
```bash
# åˆ›å»ºç”³è¯·
POST /api/flights
{"drone_model":"DJI Mavic 3","task_purpose":"å·¡æ£€",...}

# æäº¤ç”³è¯·
POST /api/flights/:id/submit

# æ‰¹å‡†ç”³è¯·ï¼ˆç®¡ç†å‘˜ï¼‰
POST /api/flights/:id/approve

# æ”¾é£
POST /api/flights/:id/launch
```

### å‘Šè­¦
```bash
# è·å–å‘Šè­¦åˆ—è¡¨
GET /api/alerts?status=new&severity=high

# æ›´æ–°å‘Šè­¦çŠ¶æ€
PUT /api/alerts/:id
{"status":"confirmed"}
```

### æ•°æ®çœ‹æ¿
```bash
# è·å–æ€»è§ˆ
GET /api/dashboard/stats?start_date=2024-01-01&end_date=2024-12-31

# å‘Šè­¦è¶‹åŠ¿
GET /api/dashboard/alert-trend?days=7
```

## ğŸ”§ é…ç½®æ–‡ä»¶

### .envï¼ˆé‡è¦ï¼‰
```env
# æ•°æ®åº“
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=ä½ çš„å¯†ç 
DB_NAME=highway_inspection_system

# å¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ï¼‰
SECRET_KEY=your-secret-key
JWT_SECRET_KEY=your-jwt-secret
```

### config.py
```python
# å¼€å‘ç¯å¢ƒ
FLASK_ENV=development

# ç”Ÿäº§ç¯å¢ƒ
FLASK_ENV=production
```

## ğŸ“ é‡è¦ç›®å½•

| ç›®å½•/æ–‡ä»¶ | è¯´æ˜ |
|-----------|------|
| `app/models/` | æ•°æ®æ¨¡å‹ |
| `app/routes/` | APIè·¯ç”± |
| `app/services/` | ä¸šåŠ¡é€»è¾‘ |
| `config.py` | é…ç½®æ–‡ä»¶ |
| `run.py` | å¯åŠ¨å…¥å£ |
| `.env` | ç¯å¢ƒå˜é‡ |

## ğŸ› å¸¸è§é”™è¯¯

### 1. ModuleNotFoundError
```bash
# è§£å†³ï¼šç¡®ä¿è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»ï¼Œé‡æ–°å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 2. æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥MySQLæœåŠ¡
# Windows: æœåŠ¡ç®¡ç†å™¨
# Linux: systemctl status mysql

# æ£€æŸ¥.envé…ç½®
```

### 3. ç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹å ç”¨
# Windows: netstat -ano | findstr :5000
# Linux: lsof -i:5000

# ä¿®æ”¹ç«¯å£
# åœ¨.envä¸­ä¿®æ”¹ PORT=5001
```

### 4. Tokenè¿‡æœŸ
```bash
# é‡æ–°ç™»å½•è·å–æ–°token
POST /api/auth/login
```

## ğŸ¨ å“åº”æ ¼å¼

### æˆåŠŸ
```json
{
  "code": 200,
  "message": "success",
  "data": {...}
}
```

### é”™è¯¯
```json
{
  "code": 400,
  "message": "é”™è¯¯ä¿¡æ¯"
}
```

### åˆ†é¡µ
```json
{
  "code": 200,
  "data": {
    "items": [...],
    "total": 100,
    "page": 1,
    "page_size": 20
  }
}
```

## ğŸ” æƒé™è¯´æ˜

| è§’è‰² | æƒé™ |
|------|------|
| æ“ä½œå‘˜ | æŸ¥çœ‹è‡ªå·±çš„æ•°æ®ã€åˆ›å»ºç”³è¯·ã€æ”¾é£ |
| ç®¡ç†å‘˜ | æ‰€æœ‰æ“ä½œå‘˜æƒé™ + å®¡æ‰¹ã€ç®¡ç†ç©ºåŸŸã€æŸ¥çœ‹æ‰€æœ‰æ•°æ® |

## ğŸ“Š æ•°æ®åº“è¡¨

| è¡¨å | è¯´æ˜ |
|------|------|
| users | ç”¨æˆ· |
| airspaces | ç©ºåŸŸ |
| flight_applications | é£è¡Œç”³è¯· |
| airspace_usage | ç©ºåŸŸä½¿ç”¨è®°å½• |
| missions | é£è¡Œä»»åŠ¡ |
| videos | è§†é¢‘ |
| analysis_results | åˆ†æç»“æœ |
| alert_events | å‘Šè­¦äº‹ä»¶ |

## ğŸ”„ çŠ¶æ€æµè½¬

### é£è¡Œç”³è¯·
```
draft â†’ pending â†’ approved/rejected
              â†“
           expired
```

### å‘Šè­¦äº‹ä»¶
```
new â†’ confirmed â†’ processing â†’ closed
```

### ä»»åŠ¡çŠ¶æ€
```
executing â†’ completed
```

## ğŸ“ å¿«é€Ÿé—®é¢˜æ’æŸ¥

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| æ— æ³•å¯åŠ¨ | æ£€æŸ¥ä¾èµ–ã€æ•°æ®åº“è¿æ¥ |
| æ¥å£404 | æ£€æŸ¥URLè·¯å¾„ã€è“å›¾æ³¨å†Œ |
| è®¤è¯å¤±è´¥ | æ£€æŸ¥tokenã€é‡æ–°ç™»å½• |
| CORSé”™è¯¯ | æ£€æŸ¥CORS_ORIGINSé…ç½® |
| æ•°æ®åº“é”™è¯¯ | æ£€æŸ¥SQLã€è¿ç§»çŠ¶æ€ |

## ğŸš€ ç”Ÿäº§éƒ¨ç½²

```bash
# 1. ä¿®æ”¹.envä¸ºç”Ÿäº§é…ç½®
FLASK_ENV=production

# 2. ä½¿ç”¨Gunicorn
pip install gunicorn
gunicorn -w 4 -b 0.0.0.0:5000 run:app

# 3. ä½¿ç”¨systemdå®ˆæŠ¤è¿›ç¨‹ï¼ˆæ¨èï¼‰
# å‚è€ƒ DEPLOYMENT_GUIDE.md
```

## ğŸ“š æ–‡æ¡£ç´¢å¼•

- **README.md** - å®Œæ•´é¡¹ç›®è¯´æ˜
- **INSTALL.md** - è¯¦ç»†å®‰è£…æ­¥éª¤
- **å¼€å‘æŒ‡å—.md** - å¼€å‘è§„èŒƒå’Œæµç¨‹
- **DEPLOYMENT_GUIDE.md** - éƒ¨ç½²æ–¹æ¡ˆ
- **PROJECT_STRUCTURE.md** - é¡¹ç›®ç»“æ„
- **å¿«é€Ÿå‚è€ƒ.md** - æœ¬æ–‡ä»¶

## ğŸ’¡ æç¤º

1. å¼€å‘æ—¶ä½¿ç”¨ `DEBUG=True`
2. ç”Ÿäº§ç¯å¢ƒåŠ¡å¿…ä¿®æ”¹å¯†é’¥
3. å®šæœŸå¤‡ä»½æ•°æ®åº“
4. ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶
5. ç¼–å†™ä»£ç æ³¨é‡Š
6. éµå¾ªä»£ç è§„èŒƒ

---

**éœ€è¦å¸®åŠ©ï¼Ÿ** æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£æˆ–è”ç³»é¡¹ç›®ç»„æˆå‘˜ã€‚

