# 用户管理模块说明

## 功能概述

用户管理模块提供了完整的用户增删改查（CRUD）功能，仅管理员（admin）角色可访问。

## 主要功能

### 1. 用户统计
- 用户总数
- 活跃用户数
- 操作员数量
- 停用/锁定用户数

### 2. 用户列表
支持以下筛选条件：
- 用户名/姓名搜索
- 角色筛选（管理员、空域管理员、操作员）
- 状态筛选（活跃、停用、锁定）

### 3. 用户创建
创建新用户需要填写：
- **必填项**：
  - 用户名（3-20个字符，唯一）
  - 密码（6-20个字符）
  - 确认密码
  - 姓名
  - 角色（管理员/空域管理员/操作员）
  - 状态（活跃/停用/锁定）

- **选填项**：
  - 邮箱（格式验证，唯一）
  - 电话（手机号格式验证）
  - 部门

### 4. 用户编辑
可以修改用户的以下信息：
- 姓名
- 邮箱
- 电话
- 角色
- 状态
- 部门

**注意**：用户名创建后不可修改

### 5. 密码管理
- **重置密码**：管理员可以为用户重置密码（6-20个字符）

### 6. 设备分配（仅操作员）
为操作员角色的用户分配无人机设备：
- DJI Mavic 3 (DJI001)
- DJI Phantom 4 (DJI002)
- DJI Mini 3 (DJI003)

### 7. 用户状态管理
- **激活**：启用已停用的用户
- **停用**：临时禁用用户账号
- **锁定**：锁定用户账号（需确认）

### 8. 用户删除
- 支持删除用户（需二次确认）
- 此操作不可恢复

## 角色说明

### 管理员 (admin)
- 拥有系统最高权限
- 可以管理所有用户
- 可以访问所有功能模块
- 可以审批飞行申请
- 可以管理空域划设

### 操作员 (operator)
- 负责无人机飞行操作
- 可以提交飞行申请
- 可以进行视频巡检

## 表单验证规则

| 字段 | 验证规则 |
|------|----------|
| 用户名 | 3-20个字符，唯一 |
| 密码 | 6-20个字符 |
| 姓名 | 必填 |
| 邮箱 | 邮箱格式，唯一 |
| 电话 | 手机号格式（1开头，11位） |
| 角色 | 必选 |
| 状态 | 必选 |

## 数据展示

用户列表显示以下信息：
- 用户名
- 姓名
- 角色（带颜色标签）
- 邮箱
- 电话
- 部门
- 状态（带颜色标签）
- 最后登录时间

## 分页功能

- 支持 10、20、50、100 条/页
- 显示总数和页码跳转

## 使用示例

### 创建新用户
1. 点击"新建用户"按钮
2. 填写必填信息
3. 点击"保存"

### 编辑用户
1. 在用户列表中找到目标用户
2. 点击"编辑"按钮
3. 修改信息后点击"保存"

### 分配设备（操作员）
1. 找到操作员角色的用户
2. 点击"分配设备"按钮
3. 勾选要分配的无人机
4. 点击"确认"

### 重置密码
1. 点击"重置密码"按钮
2. 在弹出框中输入新密码
3. 点击"确定"

## 技术实现

### Store
- 使用 Pinia 进行状态管理
- 文件位置：`src/stores/users.ts`

### 组件
- 页面组件：`src/views/Users.vue`
- 使用 Element Plus UI 组件库

### 验证
- 表单验证使用 Element Plus Form Rules
- 自定义验证器用于唯一性检查

## 注意事项

1. 只有管理员可以访问用户管理页面
2. 删除用户操作不可恢复，请谨慎操作
3. 修改用户角色会影响其可访问的功能模块
4. 锁定或停用用户后，该用户将无法登录系统

